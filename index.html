<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CryptoWeeklies Forecasts</title>

<!-- Plain meta description (no emojis for SEO snippet) -->
<meta name="description" content="AI, Statistics, and Machine Learning powered crypto forecasts and indicators. Transparent, data-based insights. No opinions, no hype. Signals from ML models trained on public data." />
<link rel="canonical" href="https://cryptoweeklies.com/" />

<!-- Markdown parser for README -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
  html { scroll-behavior: smooth; }
  :root {
    color-scheme: dark;
    --bg:#1b1b1b; --panel:#212121; --ink:#f2f2f2; --muted:#bdbdbd;
    --accent:#58a6ff; --border:#2a2a2a; --ink-weak:#d6d6d6;
    --ticker-bg:#0f0f0f; --ticker-border:#222;
  }
  * { box-sizing:border-box; }
  html,body {
    margin:0; background:var(--bg); color:var(--ink);
    font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    line-height:1.6;
  }
  a { color:var(--accent); text-decoration:none; }
  a:hover { text-decoration:underline; }

  /* === Ticker (one-line screener) === */
  .ticker {
    position:sticky; top:0; z-index:1100;
    background:var(--ticker-bg);
    border-bottom:1px solid var(--ticker-border);
    overflow:hidden; white-space:nowrap;
    height:40px; display:flex; align-items:center;
  }
  .ticker__track {
    display:inline-flex; gap:20px; align-items:center;
    animation: ticker-scroll 26s linear infinite;
    will-change: transform;
    padding-left:100%;
  }
  .ticker__item {
    display:inline-flex; align-items:center; gap:8px;
    padding:6px 10px; border-radius:999px;
    border:1px solid var(--border); background:#161616;
    font-weight:600; font-size:14px;
  }
  .ticker__item img { width:18px; height:18px; display:block; }
  .ticker__label { color:var(--muted); font-weight:500; margin-left:2px; }
  @keyframes ticker-scroll {
    0%   { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  header {
    position:sticky; top:40px; z-index:1000; /* sits below ticker */
    background:#111; border-bottom:1px solid var(--border);
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 20px;
  }
  header .brand { display:flex; gap:10px; align-items:center; }
  header .brand h1 { font-size:18px; margin:0; font-weight:600; }
  nav a { margin-left:16px; font-weight:600; color:var(--ink-weak); }
  nav a:hover { color:var(--accent); }

  main { max-width:1150px; margin:0 auto; padding:22px; }

  .card {
    background:var(--panel); border:1px solid var(--border);
    padding:16px; border-radius:10px; margin-bottom:18px;
  }
  .muted { color:var(--muted); }

  .content :is(h1,h2,h3,h4) {
    color:var(--accent);
    border-bottom:1px solid var(--border);
    padding-bottom:4px;
    margin-top:28px;
  }
  .content h1 { font-size:28px; }
  .content h2 { font-size:22px; }
  .content h3 { font-size:18px; }

  .content table { width:100%; border-collapse:collapse; margin:14px 0; }
  .content th, .content td {
    border:1px solid var(--border);
    padding:8px 10px; text-align:left;
  }
  .content thead th { background:#242424; }
  .content tr:hover { background:#262626; }

  /* Make anchors land below sticky header+ticker */
  .content :is(h1,h2,h3,h4)[id] { scroll-margin-top: 96px; }

  /* Normalize inline-styled tables pasted into README */
  .content [style*="color: black"] { color:var(--ink)!important; }
  .content [style*="background-color: black"] { background-color:transparent!important; }
  .content [style*="border: 1px solid white"] { border:1px solid var(--border)!important; }

  .table-wrap { overflow-x:auto; }
  .content table { min-width:640px; }

  footer {
    border-top:1px solid var(--border);
    text-align:center; padding:24px; color:var(--muted);
  }

  #topBtn {
    position:fixed; right:24px; bottom:24px; display:none;
    background:var(--accent); color:#fff; border:0; border-radius:8px;
    padding:10px 14px; font-weight:600; cursor:pointer;
    box-shadow:0 4px 16px rgba(0,0,0,.25);
  }
  #topBtn:hover { opacity:.9; }

  .quicklinks { display:flex; flex-wrap:wrap; gap:10px; }
  .quicklinks a {
    border:1px solid var(--border); background:var(--panel);
    padding:6px 10px; border-radius:8px;
  }
  .quicklinks a:hover { border-color:var(--accent); }

  /* YouTube link flare */
  a[href*="youtube.com"] { color:#ff4444; font-weight:600; }
  a[href*="youtube.com"]:hover { text-decoration:underline; }

  /* Intro with logo on right */
  .intro-section {
    display:flex; align-items:center; justify-content:space-between;
    gap:20px; flex-wrap:wrap;
  }
  .intro-text { flex: 1 1 420px; }
  .intro-logo img {
    width:140px; height:auto; border-radius:10px;
    box-shadow:0 2px 12px rgba(0,0,0,0.25);
  }
  @media (max-width:700px){
    .intro-section { flex-direction:column-reverse; text-align:center; }
    .intro-logo img { width:120px; margin-bottom:12px; }
  }
</style>
</head>
<body>

<!-- === One-line scrolling screener === -->
<div class="ticker" aria-label="Base & Bull Screener">
  <div class="ticker__track" id="tickerTrack"></div>
</div>

<header>
  <div class="brand">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <circle cx="12" cy="12" r="10" stroke="currentColor" opacity=".35"/>
      <path d="M7 13h10M7 9h10M9 17h6" stroke="currentColor" stroke-width="1.5"/>
    </svg>
    <h1>Crypto Weeklies</h1>
  </div>
  <nav>
    <a href="#indicators">Indicators</a>
    <a href="#top-20-cryptos-by-market-cap">Top-20</a>
    <a href="#top-100-crypto-outside-top-20">Top-100</a>
    <a href="#crypto-pairs">Pairs</a>
    <a href="#proxies">Proxies</a>
    <a href="#exotic">Exotic</a>
    <a href="#disclaimer">Disclaimer</a>
  </nav>
</header>

<main>
  <section class="card intro-section" id="intro">
    <div class="intro-text">
       CryptoWeeklies - Independent, Data-Driven Research on Digital Assets using
      <strong>ü§ñ AI ‚Ä¢ üìä Statistics ‚Ä¢ üß† Machine Learning</strong>
      <div class="muted">
        üöÄ Free daily <strong>insights</strong> - educational, not financial advice. <br>
        üîç Transparent, Quantitative, No sponsorships, and unbiased summary on <strong>YouTube</strong> videos.<br>
        üß† Forrecasts built on statistical models ‚Äî <strong>no opinions, no hype, no shilling</strong>.
      </div>
      <div>
        üìß <a href="mailto:cryptoweeklies@gmail.com">cryptoweeklies@gmail.com</a><br>
        ‚ñ∂Ô∏è <a href="https://www.youtube.com/@cryptoweeklies" target="_blank" rel="noopener">YouTube: @CryptoWeeklies</a>
      </div>
    </div>
    <div class="intro-logo">
      <img src="cryptoweeklies_logo_v8.png" alt="Crypto Weeklies logo" loading="lazy">
    </div>
  </section>

  <div class="quicklinks card">
    <a href="#indicators">Indicators</a>
    <a href="#top-20-cryptos-by-market-cap">Top-20</a>
    <a href="#top-100-crypto-outside-top-20">Top-100</a>
    <a href="#crypto-pairs">Pairs</a>
    <a href="#proxies">Proxies</a>
    <a href="#exotic">Exotic</a>
    <a href="#disclaimer">Disclaimer</a>
  </div>

  <article id="readme" class="content"></article>
</main>

<footer>
  ¬© <span id="yr"></span> Crypto Weeklies ‚Ä¢ Made with ‚ù§Ô∏è<br>
  <small class="muted">Content auto-synced from README.md</small>
</footer>

<button id="topBtn" aria-label="Back to top">‚Üë Top</button>

<script>
window.addEventListener('load', () => {
  document.getElementById('yr').textContent = new Date().getFullYear();

  // Back-to-top button
  const topBtn = document.getElementById('topBtn');
  window.addEventListener('scroll', () => {
    topBtn.style.display = (document.documentElement.scrollTop > 240) ? 'block' : 'none';
  });
  topBtn.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

  let readmeReady = false;

  // Smooth scroll with offset (ticker + header)
  function scrollToHash(hash) {
    if (!hash) return false;
    const id = decodeURIComponent(hash.replace('#',''));
    const el = document.getElementById(id);
    if (!el) return false;

    const ticker = document.querySelector('.ticker');
    const header = document.querySelector('header');
    const offset = (ticker?.offsetHeight || 0) + (header?.offsetHeight || 0) + 6;

    const y = el.getBoundingClientRect().top + window.scrollY - offset;
    window.scrollTo({ top: Math.max(0, y), behavior: 'smooth' });
    return true;
  }

  function wireInternalLinks() {
    document.querySelectorAll('nav a, .quicklinks a, a[href^="#"]').forEach(a => {
      if (!a._wired && a.hash) {
        a._wired = true;
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const h = a.hash;
          history.pushState(null, '', h);
          if (!readmeReady || !scrollToHash(h)) {
            setTimeout(() => scrollToHash(h), 80);
            setTimeout(() => scrollToHash(h), 200);
          }
        });
      }
    });
  }

  // Create stable alias IDs after README is inserted
  function addAnchorAliases(root) {
    const heads = Array.from(root.querySelectorAll('h1, h2, h3, h4'));
    function byText(pred) { return heads.find(h => pred(h.textContent.trim().toLowerCase())); }
    function ensureId(el, id) {
      if (!el) return;
      if (el.id === id) return;
      const mark = document.createElement('span');
      mark.id = id;
      mark.style.display = 'block';
      mark.style.height = '0';
      el.parentNode.insertBefore(mark, el);
    }
    ensureId(byText(t => t.startsWith('indicators')), 'indicators');
    ensureId(byText(t => t.startsWith('top 20 cryptos')), 'top-20-cryptos-by-market-cap');
    ensureId(byText(t => t.includes('top 100') && t.includes('outside top 20')), 'top-100-crypto-outside-top-20');
    ensureId(byText(t => t.startsWith('crypto pairs')), 'crypto-pairs');
    ensureId(byText(t => t.startsWith('proxies')), 'proxies');
    ensureId(byText(t => t.startsWith('exotic')), 'exotic');
    ensureId(byText(t => t.startsWith('disclaimer')), 'disclaimer');
  }

  // ====== TICKER (Base & Bull Peaks) ======
  (async function buildTicker(){
    const symbols = ["BTC","ETH","SOL","LINK","BNB","XRP"];

    // Local logo file paths (XRP filename has spaces ‚Üí URL-encode)
    const logos = {
      BTC: "bitcoin-btc-logo.png",
      ETH: "ethereum_eth_logo.png",
      SOL: "solana-sol-logo.png",
      LINK:"chainlink-link-logo.png",
      BNB: "bnb-bnb-logo.png",
      XRP: "xrp%20reverse%20logo.png"
    };

    const track = document.getElementById('tickerTrack');

    // $12,345 formatting
    function fmtUSDInt(n){
      try { return new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 }).format(n); }
      catch { return String(n); }
    }

    function pill(sym, baseText, bullText) {
      const el = document.createElement('span');
      el.className = 'ticker__item';

      const img = document.createElement('img');
      img.loading = 'lazy';
      img.alt = sym + ' logo';
      img.src = logos[sym];

      const t = document.createElement('span');
      t.textContent = sym + ' ';

      const v = document.createElement('span');
      v.className = 'ticker__label';
      v.textContent = `Base: ${baseText} ‚Ä¢ Bull: ${bullText}`;

      el.append(img, t, v);
      return el;
    }

    try {
      const resp = await fetch('/crypto_comprehensive_forecast_risk_analysis.html', {cache:'no-store'});
      if (!resp.ok) throw new Error('Fetch failed: ' + resp.status);
      const html = await resp.text();
      const doc = new DOMParser().parseFromString(html, 'text/html');

      // Prefer #riskTable generated by your script
      let targetTable = doc.querySelector('#riskTable') || doc.querySelector('table');
      if (!targetTable) throw new Error('No table found in analysis page.');

      // Find column indexes for Ticker, Base Peak, Bull Peak
      const headerCells = targetTable.querySelectorAll('thead th');
      let headTexts = headerCells.length
        ? Array.from(headerCells).map(th => th.textContent.trim())
        : Array.from(targetTable.querySelectorAll('tr:first-child th, tr:first-child td')).map(th => th.textContent.trim());

      const normalized = headTexts.map(t => t.toLowerCase().replace(/\s+/g,' ').trim());
      const symColIdx  = (() => {
        let i = normalized.findIndex(t => /^(cryptocurrency|symbol|ticker)$/.test(t));
        return i !== -1 ? i : 0; // fallback to first column
      })();
      const baseColIdx = normalized.findIndex(t => /base\s*peak/.test(t));
      const bullColIdx = normalized.findIndex(t => /bull\s*peak/.test(t));

      if (baseColIdx === -1) throw new Error('No "Base Peak" column found.');
      if (bullColIdx === -1) throw new Error('No "Bull Peak" column found.');

      // Collect data rows
      const rows = Array.from(targetTable.querySelectorAll('tbody tr, tr'))
        .filter(r => r.querySelectorAll('td').length);

      function extractDollarInt(cellText){
        const m = (cellText || '').replace(/,/g,'').match(/-?\d+(\.\d+)?/);
        if (!m) return '‚Äî';
        const num = parseFloat(m[0]);
        if (isNaN(num)) return '‚Äî';
        return '$' + fmtUSDInt(num);
      }

      // Match by exact ticker text in the symbol column (case-insensitive)
      function lookupPeaks(sym) {
        const row = rows.find(r => {
          const cells = Array.from(r.children);
          const cellText = (cells[symColIdx]?.textContent || '').trim().toUpperCase();
          return cellText === sym.toUpperCase();
        });
        if (!row) return { base:'‚Äî', bull:'‚Äî' };

        const cells = Array.from(row.children);
        const baseText = extractDollarInt((cells[baseColIdx]?.textContent || '').trim());
        const bullText = extractDollarInt((cells[bullColIdx]?.textContent || '').trim());
        return { base: baseText, bull: bullText };
      }

      const results = symbols.map(sym => {
        const { base, bull } = lookupPeaks(sym);
        return { sym, base, bull };
      });

      // Render twice for seamless loop
      const render = (arr) => arr.forEach(({sym, base, bull}) => track.appendChild(pill(sym, base, bull)));
      render(results);
      render(results);

    } catch (err) {
      console.error('Ticker error:', err);
      const fallback = ["BTC","ETH","SOL","LINK","BNB","XRP"].map(s => ({sym:s, base:'‚Äî', bull:'‚Äî'}));
      const render = (arr) => arr.forEach(({sym, base, bull}) => track.appendChild(pill(sym, base, bull)));
      render(fallback);
      render(fallback);
    }
  })();

  // ====== README LOADER ======
  async function loadREADME() {
    const url = 'https://raw.githubusercontent.com/cryptoweeklies/cryptoweeklies.github.io/main/README.md';
    try {
      const res = await fetch(url, { cache: 'no-store' });
      if (!res.ok) throw new Error('README fetch failed: ' + res.status);
      const md = await res.text();

      const html = marked.parse(md, { mangle: false, headerIds: true });
      const host = document.getElementById('readme');

      const temp = document.createElement('div');
      temp.innerHTML = html;

      // Make wide tables scrollable on mobile
      temp.querySelectorAll('table').forEach(tbl => {
        const wrap = document.createElement('div');
        wrap.className = 'table-wrap';
        tbl.replaceWith(wrap);
        wrap.appendChild(tbl);
      });

      host.innerHTML = '';
      host.append(...temp.childNodes);

      // Add stable alias anchors so header links always work
      addAnchorAliases(host);

      readmeReady = true;

      // Re-wire in-page anchors that came from README
      wireInternalLinks();

      // If user arrived with a hash, scroll to it now
      if (location.hash) {
        if (!scrollToHash(location.hash)) {
          setTimeout(() => scrollToHash(location.hash), 80);
          setTimeout(() => scrollToHash(location.hash), 200);
        }
      }
    } catch (e) {
      document.getElementById('readme').innerHTML =
        '<div class="card">Could not load README.md automatically.<br>Error: ' +
        (e && e.message ? e.message : e) +
        '<br><br>Your site still works; make sure a README.md exists in the main branch.</div>';
      console.error(e);
    }
  }

  // Initial wiring for header links present in the static HTML
  wireInternalLinks();
  loadREADME();
});
</script>

</body>
</html>
