<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CryptoWeeklies Forecasts</title>

<meta name="description" content="AI, Statistics, and Machine Learning powered crypto forecasts and indicators. Transparent, data-based insights. No opinions, no hype." />
<link rel="canonical" href="https://cryptoweeklies.com/" />

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
  html { scroll-behavior: smooth; }
  :root {
    color-scheme: dark;
    --bg:#1b1b1b; --panel:#212121; --ink:#f2f2f2; --muted:#bdbdbd;
    --accent:#58a6ff; --border:#2a2a2a; --ink-weak:#d6d6d6;
    --ticker-bg:#0f0f0f; --ticker-border:#222;
  }
  * { box-sizing:border-box; }
  html,body {
    margin:0; background:var(--bg); color:var(--ink);
    font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    line-height:1.6;
  }
  a { color:var(--accent); text-decoration:none; }
  a:hover { text-decoration:underline; }

  /* === Tickers === */
  .ticker {
    position:sticky; z-index:1100;
    background:var(--ticker-bg);
    border-bottom:1px solid var(--ticker-border);
    overflow:hidden; white-space:nowrap;
    height:40px; display:flex; align-items:center;
  }

  /* Positioning for dual banners */
  .ticker-bull { top: 0; }
  .ticker-bear { top: 40px; border-bottom: 1px solid #3a1111; background: #0a0000; }

  .ticker__track {
    display:inline-flex; gap:20px; align-items:center;
    animation: ticker-scroll 26s linear infinite;
    will-change: transform;
    padding-left:100%;
  }
  
  /* Slower scroll for bear to differentiate visually */
  .ticker-bear .ticker__track { animation-duration: 30s; }

  .ticker__item {
    display:inline-flex; align-items:center; gap:8px;
    padding:6px 10px; border-radius:999px;
    border:1px solid var(--border); background:#161616;
    font-weight:600; font-size:14px;
  }

  /* Specific styling for bear items */
  .ticker-bear .ticker__item {
    border-color: #5c1818; 
    background: #240a0a;
  }
  .ticker-bear .ticker__label { color: #ff9999; }

  .ticker__item img { width:18px; height:18px; display:block; }
  .ticker__label { color:var(--muted); font-weight:500; margin-left:2px; }

  @keyframes ticker-scroll {
    0%   { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  header {
    /* Sits below two 40px tickers = 80px */
    position:sticky; top:80px; z-index:1000;
    background:#111; border-bottom:1px solid var(--border);
    display:flex; align-items:center; justify-content:space-between;
    padding:12px 20px;
  }
  header .brand { display:flex; gap:10px; align-items:center; }
  header .brand h1 { font-size:18px; margin:0; font-weight:600; }
  nav a { margin-left:16px; font-weight:600; color:var(--ink-weak); }
  nav a:hover { color:var(--accent); }

  main { max-width:1150px; margin:0 auto; padding:22px; }

  .card {
    background:var(--panel); border:1px solid var(--border);
    padding:16px; border-radius:10px; margin-bottom:18px;
  }
  .muted { color:var(--muted); }

  .content :is(h1,h2,h3,h4) {
    color:var(--accent);
    border-bottom:1px solid var(--border);
    padding-bottom:4px;
    margin-top:28px;
  }
  .content h1 { font-size:28px; }
  .content h2 { font-size:22px; }
  .content h3 { font-size:18px; }

  .content table { width:100%; border-collapse:collapse; margin:14px 0; }
  .content th, .content td {
    border:1px solid var(--border);
    padding:8px 10px; text-align:left;
  }
  .content thead th { background:#242424; }
  .content tr:hover { background:#262626; }

  /* Scroll margin accounts for 2 tickers (80px) + header (~56px) */
  .content :is(h1,h2,h3,h4)[id] { scroll-margin-top: 140px; }

  .content [style*="color: black"] { color:var(--ink)!important; }
  .content [style*="background-color: black"] { background-color:transparent!important; }
  .content [style*="border: 1px solid white"] { border:1px solid var(--border)!important; }

  .table-wrap { overflow-x:auto; }
  .content table { min-width:640px; }

  footer {
    border-top:1px solid var(--border);
    text-align:center; padding:24px; color:var(--muted);
  }

  #topBtn {
    position:fixed; right:24px; bottom:24px; display:none;
    background:var(--accent); color:#fff; border:0; border-radius:8px;
    padding:10px 14px; font-weight:600; cursor:pointer;
    box-shadow:0 4px 16px rgba(0,0,0,.25);
  }
  #topBtn:hover { opacity:.9; }

  .quicklinks { display:flex; flex-wrap:wrap; gap:10px; }
  .quicklinks a {
    border:1px solid var(--border); background:var(--panel);
    padding:6px 10px; border-radius:8px;
  }
  .quicklinks a:hover { border-color:var(--accent); }

  a[href*="youtube.com"] { color:#ff4444; font-weight:600; }
  a[href*="youtube.com"]:hover { text-decoration:underline; }

  .intro-section {
    display:flex; align-items:center; justify-content:space-between;
    gap:20px; flex-wrap:wrap;
  }
  .intro-text { flex: 1 1 420px; }
  .intro-logo img {
    width:140px; height:auto; border-radius:10px;
    box-shadow:0 2px 12px rgba(0,0,0,0.25);
  }
  @media (max-width:700px){
    .intro-section { flex-direction:column-reverse; text-align:center; }
    .intro-logo img { width:120px; margin-bottom:12px; }
  }
</style>
</head>
<body>

<div class="ticker ticker-bull" aria-label="Base & Bull Screener">
  <div class="ticker__track" id="tickerTrackBull"></div>
</div>

<div class="ticker ticker-bear" aria-label="Panic & Blood Bear Screener">
  <div class="ticker__track" id="tickerTrackBear"></div>
</div>

<header>
  <div class="brand">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <circle cx="12" cy="12" r="10" stroke="currentColor" opacity=".35"/>
      <path d="M7 13h10M7 9h10M9 17h6" stroke="currentColor" stroke-width="1.5"/>
    </svg>
    <h1>Crypto Weeklies</h1>
  </div>
  <nav>
    <a href="#indicators">Indicators</a>
    <a href="#top-20-cryptos-by-market-cap">Top-20</a>
    <a href="#top-100-crypto-outside-top-20">Top-100</a>
    <a href="#crypto-pairs">Pairs</a>
    <a href="#etfs-&-proxies">ETFs & Proxies</a>
    <a href="#exotic">Exotic</a>
    <a href="#disclaimer">Disclaimer</a>
  </nav>
</header>

<main>
  <section class="card intro-section" id="intro">
    <div class="intro-text">
       CryptoWeeklies - Independent, Data-Driven Research on Digital Assets using
      <strong>ü§ñ AI ‚Ä¢ üìä Statistics ‚Ä¢ üß† Machine Learning</strong>
      <div class="muted">
        üöÄ Free daily <strong>insights</strong> - educational, not financial advice. <br>
        üîç Transparent, Quantitative, No sponsorships, and unbiased summary on <strong>YouTube</strong> videos.<br>
        üß† Forecasts built on statistical models ‚Äî <strong>no opinions, no hype, no shilling</strong>.
      </div>
      <div>
        üìß <a href="mailto:cryptoweeklies@gmail.com">cryptoweeklies@gmail.com</a><br>
        ‚ñ∂Ô∏è <a href="https://www.youtube.com/@cryptoweeklies" target="_blank" rel="noopener">YouTube: @CryptoWeeklies</a>
      </div>
    </div>
    <div class="intro-logo">
      <img src="cryptoweeklies_logo_v8.png" alt="Crypto Weeklies logo" loading="lazy">
    </div>
  </section>

  <div class="quicklinks card">
    <a href="#indicators">Indicators</a>
    <a href="#top-20-cryptos-by-market-cap">Top-20</a>
    <a href="#top-100-crypto-outside-top-20">Top-100</a>
    <a href="#crypto-pairs">Pairs</a>
    <a href="#etfs-&-proxies">ETFs-&-Proxies</a>
    <a href="#exotic">Exotic</a>
    <a href="#disclaimer">Disclaimer</a>
  </div>

  <article id="readme" class="content"></article>
</main>

<footer>
  ¬© <span id="yr"></span> Crypto Weeklies ‚Ä¢ Made with ‚ù§Ô∏è<br>
  <small class="muted">Content auto-synced from README.md</small>
</footer>

<button id="topBtn" aria-label="Back to top">‚Üë Top</button>

<script>
window.addEventListener('load', () => {
  document.getElementById('yr').textContent = new Date().getFullYear();

  // Back-to-top button
  const topBtn = document.getElementById('topBtn');
  window.addEventListener('scroll', () => {
    topBtn.style.display = (document.documentElement.scrollTop > 240) ? 'block' : 'none';
  });
  topBtn.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

  let readmeReady = false;

  // Smooth scroll logic accounting for double ticker + header
  function scrollToHash(hash) {
    if (!hash) return false;
    const id = decodeURIComponent(hash.replace('#',''));
    const el = document.getElementById(id);
    if (!el) return false;

    // Calculate total height of sticky elements
    let offset = 0;
    document.querySelectorAll('.ticker').forEach(t => offset += t.offsetHeight);
    const header = document.querySelector('header');
    offset += (header?.offsetHeight || 0) + 6;

    const y = el.getBoundingClientRect().top + window.scrollY - offset;
    window.scrollTo({ top: Math.max(0, y), behavior: 'smooth' });
    return true;
  }

  function wireInternalLinks() {
    document.querySelectorAll('nav a, .quicklinks a, a[href^="#"]').forEach(a => {
      if (!a._wired && a.hash) {
        a._wired = true;
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const h = a.hash;
          history.pushState(null, '', h);
          if (!readmeReady || !scrollToHash(h)) {
            setTimeout(() => scrollToHash(h), 80);
            setTimeout(() => scrollToHash(h), 200);
          }
        });
      }
    });
  }

  function addAnchorAliases(root) {
    const heads = Array.from(root.querySelectorAll('h1, h2, h3, h4'));
    function byText(pred) { return heads.find(h => pred(h.textContent.trim().toLowerCase())); }
    function ensureId(el, id) {
      if (!el) return;
      if (el.id === id) return;
      const mark = document.createElement('span');
      mark.id = id;
      mark.style.display = 'block';
      mark.style.height = '0';
      el.parentNode.insertBefore(mark, el);
    }
    ensureId(byText(t => t.startsWith('indicators')), 'indicators');
    ensureId(byText(t => t.startsWith('top 20 cryptos')), 'top-20-cryptos-by-market-cap');
    ensureId(byText(t => t.includes('top 100') && t.includes('outside top 20')), 'top-100-crypto-outside-top-20');
    ensureId(byText(t => t.startsWith('crypto pairs')), 'crypto-pairs');
    ensureId(byText(t => t.startsWith('etfs-&-proxies')), 'etfs-&-proxies');
    ensureId(byText(t => t.startsWith('exotic')), 'exotic');
    ensureId(byText(t => t.startsWith('disclaimer')), 'disclaimer');
  }

  // Shared Config
  const symbols = ["BTC","ETH","SOL","LINK","BNB","XRP"];
  const logos = {
    BTC: "bitcoin-btc-logo.png",
    ETH: "ethereum_eth_logo.png",
    SOL: "solana-sol-logo.png",
    LINK:"chainlink-link-logo.png",
    BNB: "bnb-bnb-logo.png",
    XRP: "xrp%20reverse%20logo.png"
  };

  // Helper formatting functions
  function fmtUSDInt(n){
    try { return new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 }).format(n); }
    catch { return String(n); }
  }
  
  function extractDollarInt(cellText){
    const m = (cellText || '').replace(/,/g,'').match(/-?\d+(\.\d+)?/);
    if (!m) return '‚Äî';
    const num = parseFloat(m[0]);
    if (isNaN(num)) return '‚Äî';
    return '$' + fmtUSDInt(num);
  }

  // ====== TICKER 1: BULL CASE ======
  (async function buildBullTicker(){
    const track = document.getElementById('tickerTrackBull');

    function pill(sym, baseText, bullText) {
      const el = document.createElement('span');
      el.className = 'ticker__item';
      
      const img = document.createElement('img');
      img.loading = 'lazy'; img.alt = sym; img.src = logos[sym];

      const t = document.createElement('span'); t.textContent = sym;
      const v = document.createElement('span'); 
      v.className = 'ticker__label';
      v.textContent = `Base: ${baseText} ‚Ä¢ Bull: ${bullText}`;
      
      el.append(img, t, v);
      return el;
    }

    try {
      const resp = await fetch('/crypto_comprehensive_forecast_risk_analysis.html', {cache:'no-store'});
      if (!resp.ok) throw new Error('Bull fetch failed');
      const html = await resp.text();
      const doc = new DOMParser().parseFromString(html, 'text/html');

      const targetTable = doc.querySelector('#riskTable') || doc.querySelector('table');
      if (!targetTable) throw new Error('No Bull table found');

      const headers = Array.from(targetTable.querySelectorAll('thead th')).map(th => th.textContent.trim().toLowerCase());
      
      // Dynamic Column Detection
      const symIdx = headers.findIndex(h => h.includes('cryptocurrency') || h.includes('ticker') || h.includes('symbol')) || 0;
      const baseIdx = headers.findIndex(h => h.includes('base peak'));
      const bullIdx = headers.findIndex(h => h.includes('bull peak'));

      const rows = Array.from(targetTable.querySelectorAll('tbody tr'));

      const results = symbols.map(sym => {
        const row = rows.find(r => (r.children[symIdx]?.textContent || '').trim().toUpperCase() === sym.toUpperCase());
        if(!row) return {sym, base:'‚Äî', bull:'‚Äî'};
        return {
          sym,
          base: extractDollarInt(row.children[baseIdx]?.textContent),
          bull: extractDollarInt(row.children[bullIdx]?.textContent)
        };
      });

      const render = (arr) => arr.forEach(d => track.appendChild(pill(d.sym, d.base, d.bull)));
      render(results); render(results); // Loop

    } catch (err) {
      console.error(err);
    }
  })();

  // ====== TICKER 2: BEAR CASE ======
  (async function buildBearTicker(){
    const track = document.getElementById('tickerTrackBear');

    function pill(sym, panicText, bloodText) {
      const el = document.createElement('span');
      el.className = 'ticker__item';
      
      const img = document.createElement('img');
      img.loading = 'lazy'; img.alt = sym; img.src = logos[sym];

      const t = document.createElement('span'); t.textContent = sym;
      const v = document.createElement('span'); 
      v.className = 'ticker__label';
      // Distinct label style defined in CSS
      v.textContent = `Panic: ${panicText} ‚Ä¢ Blood: ${bloodText}`;
      
      el.append(img, t, v);
      return el;
    }

    try {
      const resp = await fetch('/crypto_bear_targets_analysis.html', {cache:'no-store'});
      if (!resp.ok) throw new Error('Bear fetch failed');
      const html = await resp.text();
      const doc = new DOMParser().parseFromString(html, 'text/html');

      const targetTable = doc.querySelector('#bearTable') || doc.querySelector('table');
      if (!targetTable) throw new Error('No Bear table found');

      const headers = Array.from(targetTable.querySelectorAll('thead th')).map(th => th.textContent.trim().toLowerCase());

      // Dynamic Column Detection
      const symIdx = headers.findIndex(h => h.includes('cryptocurrency') || h.includes('ticker')) || 0;
      // Look for columns containing "Panic" and "Blood" and "$"
      const panicIdx = headers.findIndex(h => h.includes('panic') && h.includes('$'));
      const bloodIdx = headers.findIndex(h => h.includes('blood') && h.includes('$'));

      const rows = Array.from(targetTable.querySelectorAll('tbody tr'));

      const results = symbols.map(sym => {
        const row = rows.find(r => (r.children[symIdx]?.textContent || '').trim().toUpperCase() === sym.toUpperCase());
        if(!row) return {sym, panic:'‚Äî', blood:'‚Äî'};
        return {
          sym,
          panic: extractDollarInt(row.children[panicIdx]?.textContent),
          blood: extractDollarInt(row.children[bloodIdx]?.textContent)
        };
      });

      const render = (arr) => arr.forEach(d => track.appendChild(pill(d.sym, d.panic, d.blood)));
      render(results); render(results); // Loop

    } catch (err) {
      console.error(err);
    }
  })();

  // ====== README LOADER ======
  async function loadREADME() {
    const url = 'https://raw.githubusercontent.com/cryptoweeklies/cryptoweeklies.github.io/main/README.md';
    try {
      const res = await fetch(url, { cache: 'no-store' });
      if (!res.ok) throw new Error('README fetch failed');
      const md = await res.text();
      const html = marked.parse(md, { mangle: false, headerIds: true });
      const host = document.getElementById('readme');
      const temp = document.createElement('div');
      temp.innerHTML = html;

      temp.querySelectorAll('table').forEach(tbl => {
        const wrap = document.createElement('div');
        wrap.className = 'table-wrap';
        tbl.replaceWith(wrap);
        wrap.appendChild(tbl);
      });

      host.innerHTML = '';
      host.append(...temp.childNodes);
      addAnchorAliases(host);
      readmeReady = true;
      wireInternalLinks();

      if (location.hash) {
        if (!scrollToHash(location.hash)) {
          setTimeout(() => scrollToHash(location.hash), 80);
          setTimeout(() => scrollToHash(location.hash), 200);
        }
      }
    } catch (e) {
      document.getElementById('readme').innerHTML = '<div class="card">Loading...</div>';
      console.error(e);
    }
  }

  wireInternalLinks();
  loadREADME();
});
</script>

</body>
</html>
